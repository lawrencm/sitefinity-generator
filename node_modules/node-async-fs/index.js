const {promisify} = require('util')
const fs = require('fs')

class fsAsync{
  constructor() {
    Object.assign(this, this._trsform())
  }
  _trsform () {
    const asyncRex = /Sync/
    for (let i in fs) {
      if (asyncRex.test(i)) {
        this._async(i.replace(asyncRex, ''))
      }
    }
  }
  _async (method) {
    let flag = method
    if (typeof method === 'string') method = fs[method]
    if (Object.prototype.toString.call(method) !== '[object Function]') return
    this[flag] = promisify(method)
  }
}
module.exports = new fsAsync()